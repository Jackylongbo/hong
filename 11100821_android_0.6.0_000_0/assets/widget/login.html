<!DOCTYPE html>
<html class="um landscape min-width-240px min-width-320px min-width-480px min-width-768px min-width-1024px">
  <head>
    <title>
    </title>
    <meta charset="utf-8">
    <meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="css/ui-input.css">
    <link rel="stylesheet" href="css/ui-res.css">
    <link rel="stylesheet" href="css/ui-btn.css">
    <link rel="stylesheet" href="css/ui-base.css">
    <link rel="stylesheet" href="css/ui-box.css">
    <link rel="stylesheet" href="css/ui-color.css">
    <script src="js/zy_control.js">
    </script>
    <script src="js/zy_click.js">
    </script>
    <script src="js/public.js">
    </script>
  </head>
<body class="um-vp">
<div id="page_0" class="up ub ub-ver" tabindex="0">
            <!--header开始-->
            <div id="header" class="uh c-blu2 t-wh tbg us">
                <!--按钮开始-->
                <div class="btn btn-l btn-a ub ub-ac " ontouchstart="winclose();">
                    <div class="ulim">
                        返回
                    </div>
                </div>
                <!--按钮结束--><h1 class="ut ulev0 ut-s tx-c" tabindex="0">用户登录</h1>
            </div>
            <!--header结束-->

<div id="txt" class="uinn">

<div id="ureg">
<!--块容器开始-->
<div class="ub ub-ver uba b-gra uc-a1 t-wh umar-t">	
 <div class="ubb b-gra c-blu c-m1 uinn uc-t1 tx-c">会员注册</div>
	 <div class="ubb b-gra c-m1 uinn "><!--文本开始-->
<div class="ub t-bla ulab">
<div class="uinn ulim">设置帐号：</div>
 <div class="ub-f1 uba uc-a1 b-gra us-i uinput uinn4">
 		<input placeholder="请输入你的帐号" id="reguname" name="reguname" type="text" class="uc-a1">
  </div>
</div>
<!--文本结束-->
</div>
	  <div class="ubb b-gra c-m1 uinn "><!--文本开始-->
<div class="ub t-bla ulab">
<div class="uinn ulim">设置密码：</div>
 <div class="ub-f1 uba uc-a1 b-gra us-i uinput uinn4">
 		<input placeholder="请输入你的密码" id="regupass" name="regupass" type="password" class="uc-a1">
  </div>
</div>
<!--文本结束-->
</div>
<div class="ubb b-gra c-m1 uinn "><!--文本开始-->
<div class="ub t-bla ulab">
<div class="uinn ulim">重复密码：</div>
 <div class="ub-f1 uba uc-a1 b-gra us-i uinput uinn4">
 		<input placeholder="请重复输入你的密码" id="reupass" name="reupass" type="password" class="uc-a1">
  </div>
</div>
<!--文本结束-->
</div>
<div class="ubb b-gra c-m1 uinn "><!--下拉列表开始-->
<div class="ub t-bla">
    <div class="uinn ulim">你的性别：</div>
  <div class="ub-f1 ub uba1 uc-a1 c-wh b-gra us-i sel">
  <div class="ub-f1 ut-s uinn ulev-1 tx-l">选择你的性别</div>
 <div class="ubl b-gra c-bla c-m2 umw2 ub ub-pc uc-r1 ub-ac">
   <div class="ub-img umw1 umh1 res3"></div>
</div>
<select name="sex" selectedindex="0" id="sex" onchange="zy_selectmenu(this.id)">
  <option value="1">男</option>
  <option value="0">女</option>
 </select>
 </div>
</div>
<!--下拉列表结束-->
</div>
<div class="ubb b-gra c-m1 uinn "><!--文本开始-->
<div class="ub t-bla ulab">
<div class="uinn ulim">联系电话：</div>
 <div class="ub-f1 uba uc-a1 b-gra us-i uinput uinn4">
 		<input placeholder="请输入联系电话" id="tel" name="tel" type="text" class="uc-a1">
  </div>
</div>
<!--文本结束-->
</div>
<div class="ubb b-gra c-m1 uinn "><!--文本开始-->
<div class="ub t-bla ulab">
<div class="uinn ulim">联系邮箱：</div>
 <div class="ub-f1 uba uc-a1 b-gra us-i uinput uinn4">
 		<input placeholder="请输入联系邮箱" id="mail" name="mail" type="text" class="uc-a1">
  </div>
</div>
<!--文本结束-->
</div>

 <div class="c-m1 uinn uc-b1 "><!--块容器开始-->
<div class="ub b-gra c-m1 t-wh uc-a1 ">
 <div class="b-gra ub-f1 uinn uc-l1"><!--按钮开始-->
<div ontouchstart="zy_touch('btn-act')" onclick="savereg();" class="btn uba b-bla uinn5 c-blu c-m1 uc-a t-wh">提交注册</div>
<!--按钮结束--></div>
 <div class="ub-f1 uinn uc-r1"><!--按钮开始-->
<div ontouchstart="zy_touch('btn-act')" onclick="loginuser();" class="btn uba b-bla uinn5 c-org c-m1 uc-a t-wh">我想登录</div>
<!--按钮结束--></div>
 </div>
<!--块容器结束--></div> 
</div>
<!--块容器结束-->
</div>


<div id="ulogin">
<!--块容器开始-->
<div class="ub ub-ver b-gra">

	 <div class="ubb b-gra uinn "><!--文本开始-->
<div class="ub t-bla ulab">
<div class="uinn ulim btext">帐号：</div>
 <div class="ub-f1 b-gra uinput uinn4">
 		<input placeholder="请输入你的帐号" id="uname" name="uname" type="text" style="border:none;">
  </div>
</div>
<!--文本结束-->
</div>
	  <div class="ubb b-gra uinn "><!--文本开始-->
<div class="ub t-bla ulab">
<div class="uinn ulim btext">密码：</div>
 <div class="ub-f1 b-gra uinput uinn4">
 		<input placeholder="请输入你的密码" id="upass" name="upass" type="password" style="border:none;">
  </div>
</div>
<!--文本结束-->
</div>
 <div class="uinn"><!--块容器开始-->
<div class="ub ub-pc">
 <div class="b-gra ub-f1 uinn uc-l1"><!--按钮开始-->
<div ontouchstart="zy_touch('btn-act')" onclick="logins();" class="btn uinn5 c-org c-m1 uc-a t-wh us"><b>登　录</b></div>
<!--按钮结束--></div>

<!--块容器结束--></div>
</div>
<!--块容器结束-->
</div>
<!--块容器开始-->
<div class="ub ub-ver uinn5 tx-c btext" onclick="tel('02193203944');">	
无帐号请拔打电话021-93203888申请
</div>
<!--块容器结束-->


</div>

</div>
</body>
<script>
$$("ureg").style.display = "none";
$$("regid").style.display = "none";
var uname="";
window.uexOnload=function(type)
{
	if(!type){
		uexWindow.setBounce("1");
	}
	uexWidgetOne.cbError = function(opCode, errorCode, errorInfo){
　　 alert("errorCode:" + errorCode + "\nerrorInfo:" + errorInfo);
　　 }　
}

function logins(){
	uname=$$("uname").value;
	upass=$$("upass").value;
	if(uname=="" || upass==""){
		uexWindow.toast("0","5","帐号与密码不能为空","2000");
		return false;
	}
	if(isChinese(uname)==true || isChinese(upass)==true){
		uexWindow.toast("0","5","帐号与密码不能输入中文","2000");
		return false;
	}
	gologin(uname,upass);
}

function gologin(user,pass){
		uexWindow.toast("0","5","正在登录...","0");
		var url = json_http_url+"login.asp?action=login&uname="+user+"&upass="+pass;
		uexXmlHttpMgr.onData = login_Success;
		uexXmlHttpMgr.open(33, "get", url,"");
		uexXmlHttpMgr.send(33);
}
function login_Success(opid,status,result){
		if (status == -1) {
			uexWindow.toast("0","5","服务器端出错或请求超时","3000");
		}
		if(status==1){
		uexXmlHttpMgr.close(33);
		uexWindow.closeToast();
		if(result=="a"){uexWindow.toast("0","5","帐号与密码不能为空","2000");}
		if(result=="b"){uexWindow.toast("0","5","帐号或密码错误","2000");}
		if(result=="c"){
			//uexWindow.toast("0","5","恭喜您 登录成功","2000");
			localStorage.username=uname;
			uexWindow.alert("提示","登录成功！可以进行打分与评论了！","我知道了");
			winclose();
			}
	    }
}

function reguser(){
	$$("ulogin").style.display = "none";
	$$("ureg").style.display = "";
}

function loginuser(){
	$$("uname").value="";
	$$("upass").value="";
	$$("ulogin").style.display = "";
	$$("ureg").style.display = "none";
}

function savereg(){
	uname=$$("reguname").value;
	upass=$$("regupass").value;
	reupass=$$("reupass").value;
	if(upass!=reupass){
		uexWindow.toast("0","5","两次密码不相同","2000");
		return false;
	}
	if(uname=="" || upass==""){
		uexWindow.toast("0","5","帐号与密码不能为空","2000");
		return false;
	}
	if(isChinese(uname)==true || isChinese(uname)==true){
		uexWindow.toast("0","5","帐号与密码不能为中文","2000");
		return false;
	}
	sex=$$("sex").value;
	tel=$$("tel").value;
	mail=$$("mail").value;
	regpost(uname,upass,sex,tel,mail);
}

function regpost(u,p,s,t,m){
		uexWindow.toast("0","5","正在注册...","0");
		var url = json_http_url+"reg.asp?action=reguser&uname="+u+"&upass="+p+"&sex="+s+"&tel="+t+"&mail="+m;
		//alert(url);
		uexXmlHttpMgr.onData = loginSuccess;
		uexXmlHttpMgr.open(7105, "post", url,"");
		uexXmlHttpMgr.send(7105);
}
function loginSuccess(opid,status,result){
		if (status == -1) {
			uexWindow.toast("0","5","服务器端出错或请求超时","3000");
		}
		if(status==1){
		uexXmlHttpMgr.close(7105);
		uexWindow.closeToast();
		if(result=="n"){uexWindow.toast("0","5","帐号已经被占用","2000");}
		if(result=="y"){uexWindow.toast("0","5","恭喜您 注册成功","2000");loginuser();}
	    }
}

function tel(m){
	uexCall.dial(m);
}

function winclose(){
            if (localStorage.platstr == "android") {
                uexWindow.close();
            }
            else {
                uexWindow.windowBack(0);
            }
        }
</script>
</html>